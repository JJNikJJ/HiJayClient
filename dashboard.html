<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель управления</title>
</head>
<body>
<!-- Заголовок страницы -->
<h1>Список контактов</h1>
<!-- Контейнер для списка пользователей -->
<div id="userList"></div>

<script>
    // Объявление и инициализация переменных для текущего пользователя
    // и пользователя, с которым возможно будет установлен чат.
    // В реальном приложении значения этих переменных должны устанавливаться
    // в результате аутентификации и должны быть сохранены, например, в localStorage.
    const currentUser = '2';  // ID текущего пользователя
    const idUser = '5';  // ID пользователя для демонстрации (может быть использован в будущем)

    // Запрос к серверу для получения списка всех пользователей
    fetch('http://localhost:8000/users/')
        .then(response => response.json())  // Парсинг ответа от сервера в формате JSON
        .then(users => {
            const userListContainer = document.getElementById('userList');
            userListContainer.innerHTML = '';  // Очистка контейнера перед добавлением новых данных

            users.forEach(user => {
                if (user.id !== currentUser) {  // Исключаем текущего пользователя из списка
                    const userDiv = document.createElement('div');
                    const userLink = document.createElement('a');
                    // Создание ссылки на чат с каждым пользователем
                    // В примере путь статичен, но должен быть динамичным в зависимости от ID пользователя
                    userLink.href = `chat.html`;  // Путь к странице чата
                    userLink.textContent = user.email;  // Отображение email пользователя как текста ссылки
                    userDiv.appendChild(userLink);  // Добавление ссылки в блок div
                    userListContainer.appendChild(userDiv);  // Добавление блока div в контейнер списка пользователей
                }
            });
        })
        .catch(error => {
            // Обработка возможных ошибок при запросе
            console.error('Ошибка при получении списка пользователей:', error);
        });
</script>
</body>
</html>
